(function(e,t,n,r){var i=function(e,n,r,i){var s=t.createElement("canvas"),o,u;s.width=n||100;s.height=r||100;u=s.getContext("2d");if(!i){for(o=0;o<=s.width;o++){u.strokeStyle="hsl("+o/s.width*360+", "+"80%, "+e.luminosity+"%)";u.beginPath();u.moveTo(o,0);u.lineTo(o,s.height);u.stroke()}}return s},s=function(){function e(e,t){if(typeof e==="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1){e="100%"}e=Math.min(t,Math.max(0,parseFloat(e)));if(t===100){e=parseInt(e*t,10)/100}if(Math.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function t(e,t,n){if(n<0)n+=1;if(n>1)n-=1;if(n<1/6)return e+(t-e)*6*n;if(n<1/2)return t;if(n<2/3)return e+(t-e)*(2/3-n)*6;return e}return function(n,r,i){var s,o,u;n=e(n.toFixed(0),360);r=e(r.toFixed(0),100);i=e(i.toFixed(0),100);if(r===0){s=o=u=i}else{var a=i<.5?i*(1+r):i+r-i*r;var f=2*i-a;s=t(f,a,n+1/3);o=t(f,a,n);u=t(f,a,n-1/3)}return"#"+(~~(s*255)).toString(16)+(~~(o*255)).toString(16)+(~~(u*255)).toString(16)}}(),o=function(e){e.cursor.style.background="hsl("+e.hue*360+", "+e.saturation+"%, "+e.luminosity+"%)";e.cursor.style.left=e.hue*100+"%"},u=function(e){var r=function(e){var r=e.changedTouches[0],i=t.createEvent("MouseEvent");i.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],true,true,n,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null);r.target.dispatchEvent(i);e.preventDefault()};["touchstart","touchmove","touchend","touchcancel"].forEach(function(t){e.addEventListener(t,r,true)});return r};e.fn.colorPicker=function(n){var r=this[0],a=e(r),f={debug:n.debug||false,saturation:n.saturation||80,luminosity:n.luminosity||65,hue:n.hue||.5,cursor:n.cursor||r.querySelector(".cursor"),callback:n.callback},l=false;a.css({"background-image":"url("+i(f).toDataURL("image/png")+")","background-size":"100%"});if(f.cursor){o(f);u(r);["mousedown","mousemove","mouseup"].forEach(function(n){(n==="mousedown"?a:e(t)).on(n,function(e){if(e.type==="mousedown"){l=true}else if(e.type==="mouseup"){l=false}if(l){if((f.hue=(e.clientX-r.offsetLeft)/r.offsetWidth)<0){f.hue=0}else if(f.hue>1){f.hue=1}o(f)}})})}return function(e){f.callback(s(f.hue*360,f.saturation,f.luminosity));e.preventDefault()}}})(jQuery,document,window)